"use strict";(self.webpackChunk_1j1s_front_docs=self.webpackChunk_1j1s_front_docs||[]).push([[363],{9694:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"onboarding/aller-plus-loin","title":"Pour aller plus loin sur le front","description":"Commandes utiles","source":"@site/docs/onboarding/2-aller-plus-loin.md","sourceDirName":"onboarding","slug":"/onboarding/aller-plus-loin","permalink":"/1j1s-front/docs/onboarding/aller-plus-loin","draft":false,"unlisted":false,"editUrl":"https://github.com/DNUM-SocialGouv/1j1s-front/tree/main/docs/docs/docs/onboarding/2-aller-plus-loin.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_label":"2 - Pour aller plus loin","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"1 - Lancer le front","permalink":"/1j1s-front/docs/onboarding/installation"},"next":{"title":"La premi\xe8re mise en production","permalink":"/1j1s-front/docs/onboarding/mep"}}');var t=s(4848),l=s(8453);const i={sidebar_label:"2 - Pour aller plus loin",sidebar_position:2},o="Pour aller plus loin sur le front",d={},c=[{value:"Commandes utiles",id:"commandes-utiles",level:2},{value:"Configuration locale du CMS et de Meilisearch",id:"configuration-locale-du-cms-et-de-meilisearch",level:2},{value:"L&#39;\xe9cosyst\xe8me 1j1s",id:"l\xe9cosyst\xe8me-1j1s",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"pour-aller-plus-loin-sur-le-front",children:"Pour aller plus loin sur le front"})}),"\n",(0,t.jsx)(n.h2,{id:"commandes-utiles",children:"Commandes utiles"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Commande"}),(0,t.jsx)(n.th,{children:"Fonction"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"npm run lint"}),(0,t.jsx)(n.td,{children:"V\xe9rifie le formatage du code"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["npm run lint",":fix"]}),(0,t.jsx)(n.td,{children:"Formater le code"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"npm run test"}),(0,t.jsx)(n.td,{children:"Lance les tests"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["npm run test",":watch"]}),(0,t.jsx)(n.td,{children:"Lance les tests avec un watcher"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["npm run test",":coverage"]}),(0,t.jsx)(n.td,{children:"Lance les tests en indiquant le test coverage"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"npm run dev"}),(0,t.jsx)(n.td,{children:"Lance le site en mode d\xe9veloppeur (avec hot reload)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"npm run start"}),(0,t.jsx)(n.td,{children:"Lance la derni\xe8re version qui a \xe9t\xe9 built (sans hot reload)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"npm run build"}),(0,t.jsx)(n.td,{children:"build le site comme en production"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"npm run analyze"}),(0,t.jsx)(n.td,{children:"Analyze la taille du site et des packages"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["npm run analyze",":server"]}),(0,t.jsx)(n.td,{children:"Analyze la taille du site et des packages c\xf4t\xe9 serveur"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"npm run e2e (headless)"}),(0,t.jsx)(n.td,{children:"Lance les tests cypress (n\xe9cessite que le site tourne)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["npm run e2e",":open"]}),(0,t.jsx)(n.td,{children:"Lance les tests cypress (n\xe9cessite que le site tourne)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"npm run storybook"}),(0,t.jsx)(n.td,{children:"Lance la documentation interactive des composants / assets Sass en local"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["npm run storybook",":build"]}),(0,t.jsx)(n.td,{children:"Build une version statique de la documentation storybook"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"docker-compose up -d redis"}),(0,t.jsxs)(n.td,{children:["Lance redis en local (n\xe9cessite de r\xe9affecter la variable ",(0,t.jsx)(n.code,{children:"REDIS_URL"}),")"]})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"configuration-locale-du-cms-et-de-meilisearch",children:"Configuration locale du CMS et de Meilisearch"}),"\n",(0,t.jsx)(n.p,{children:"Il faut avoir :"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["lanc\xe9 le projet 1j1s-main-cms et peupl\xe9 les donn\xe9es via les scripts ",(0,t.jsx)(n.code,{children:"npm run docker:populate"})," et ",(0,t.jsx)(n.code,{children:"npm run docker:start"}),"  (voir documentation sur le repo concern\xe9)"]}),"\n",(0,t.jsxs)(n.li,{children:["synchronis\xe9 la configuration sur l'interface d'administration du CMS / Strapi (",(0,t.jsx)(n.code,{children:"Settings -> Config sync -> Interface"}),'-> Cliquer sur "Import")']}),"\n",(0,t.jsxs)(n.li,{children:["dans Strapi (",(0,t.jsx)(n.code,{children:"Content-Manager -> Collection Types -> User"}),"), r\xe9cup\xe9r\xe9 les credentials de l'utilisateur 1j1s avec role formulaire pour renseigner la variable d'environnement ",(0,t.jsx)(n.code,{children:"STRAPI_AUTH"})," du projet 1j1s-front"]}),"\n",(0,t.jsxs)(n.li,{children:["lanc\xe9 meilisearch et renseign\xe9 la master key avec la m\xeame valeur que la variable d'env ",(0,t.jsx)(n.code,{children:"NEXT_PUBLIC_STAGE_SEARCH_ENGINE_API_KEY"}),"\nExemple : pour - ",(0,t.jsx)(n.code,{children:"MEILI_MASTER_KEY=${MEILI_MASTER_KEY:-masterKey}"})," dans ",(0,t.jsx)(n.code,{children:"docker-compose.yml"})," du projet 1j1s-main-cms -> il faut avoir ",(0,t.jsx)(n.code,{children:"NEXT_PUBLIC_STAGE_SEARCH_ENGINE_API_KEY=masterKey"})," dans ",(0,t.jsx)(n.code,{children:".env"})," du projet 1j1s-front"]}),"\n",(0,t.jsx)(n.li,{children:"index\xe9 les collections du CMS via le plugin Meilisearch = cocher les collections \xe0 indexer (logements, offre de stages, fiches metiers...) sur interface Strapi"}),"\n",(0,t.jsxs)(n.li,{children:["Ajouter la ligne suivante au fichier ",(0,t.jsx)(n.code,{children:"/etc/hosts"})," :"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"127.0.0.1       minio\n"})}),"\n",(0,t.jsx)(n.h2,{id:"l\xe9cosyst\xe8me-1j1s",children:"L'\xe9cosyst\xe8me 1j1s"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/DNUM-SocialGouv/1j1s-main-cms",children:"Projet CMS"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/DNUM-SocialGouv/1j1s-stage-orchestrateur-transform-load",children:"Projet chargement de donn\xe9es"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/DNUM-SocialGouv/1j1s-test-charge",children:"Projet test de performances"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/DNUM-SocialGouv/1j1s-front-lighthouse-report",children:"Projet test lighthouse automatis\xe9"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>o});var r=s(6540);const t={},l=r.createContext(t);function i(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);